<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 360" role="img" aria-label="Deterministic cycle flow">
  <style>
    .box { fill: #f5f7ff; stroke: #1f2937; stroke-width: 1.5; }
    .arrow { stroke: #1f2937; stroke-width: 1.5; marker-end: url(#arrow); }
    text { font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; fill: #111827; }
  </style>
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#1f2937" />
    </marker>
  </defs>

  <rect class="box" x="30" y="40" width="150" height="60" rx="6" />
  <text x="105" y="70" text-anchor="middle">Read state</text>
  <text x="105" y="88" text-anchor="middle">(self + pulse)</text>

  <rect class="box" x="220" y="40" width="150" height="60" rx="6" />
  <text x="295" y="70" text-anchor="middle">Validate inputs</text>
  <text x="295" y="88" text-anchor="middle">guardrails</text>

  <rect class="box" x="410" y="40" width="260" height="60" rx="6" />
  <text x="540" y="64" text-anchor="middle">Module transforms</text>
  <text x="540" y="82" text-anchor="middle">arbitrator → kernel → narrator → simulation</text>

  <rect class="box" x="30" y="180" width="180" height="60" rx="6" />
  <text x="120" y="210" text-anchor="middle">Write-back</text>
  <text x="120" y="228" text-anchor="middle">strict persistence</text>

  <rect class="box" x="250" y="180" width="170" height="60" rx="6" />
  <text x="335" y="210" text-anchor="middle">Safety checks</text>
  <text x="335" y="228" text-anchor="middle">safety_flag propagation</text>

  <rect class="box" x="460" y="180" width="200" height="60" rx="6" />
  <text x="560" y="210" text-anchor="middle">Pulse publication</text>
  <text x="560" y="228" text-anchor="middle">Pulse Bus 2.0 metadata</text>

  <line class="arrow" x1="180" y1="70" x2="220" y2="70" />
  <line class="arrow" x1="370" y1="70" x2="410" y2="70" />
  <line class="arrow" x1="540" y1="100" x2="540" y2="180" />

  <line class="arrow" x1="210" y1="210" x2="250" y2="210" />
  <line class="arrow" x1="420" y1="210" x2="460" y2="210" />

  <line class="arrow" x1="100" y1="100" x2="100" y2="180" />
</svg>
